<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Ğ¡Ñ‚Ğ¾Ğ»Ğ¸ĞºĞ¸</title>
<style>
:root { color-scheme: dark; }
body { margin: 0; padding: 20px; font-family: "Segoe UI", sans-serif; background-color: var(--tg-theme-bg-color, #1f1f1f); color: var(--tg-theme-text-color, #ffffff); box-sizing: border-box; }
h1 { font-size: 24px; font-weight: bold; margin-bottom: 20px; text-align: center; }
.grid { display: flex; flex-direction: column; align-items: center; gap: 16px; }
.card { background-color: var(--tg-theme-secondary-bg-color, #252525); border-radius: 16px; overflow: hidden; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); display: flex; flex-direction: column; width: 100%; max-width: 400px; }
.card img { width: 100%; height: 150px; object-fit: cover; }
.card-content { padding: 16px; flex-grow: 1; }
.card h2 { font-size: 18px; margin: 0 0 8px 0; }
.card p { font-size: 14px; color: var(--tg-theme-hint-color, #aaaaaa); margin: 0 0 16px 0; }
.card button { margin: 0 16px 16px; height: 44px; background-color: #007bff; color: white; border: none; border-radius: 12px; font-weight: 600; font-size: 16px; cursor: pointer; transition: background 0.3s ease; }
.card button:hover { background-color: #0056b3; }
#booking-form-container { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(4px); justify-content: center; align-items: center; padding: 20px; }
#booking-form { background-color: var(--tg-theme-secondary-bg-color, #252525); border-radius: 16px; padding: 20px; width: 90%; max-width: 400px; box-shadow: 0 0 15px rgba(0, 123, 255, 0.5); position: relative; box-sizing: border-box; }
#booking-form h2 { margin-top: 0; color: white; text-align: center; }
#booking-form label { display: block; margin: 15px 0 5px; color: white; }
#booking-form input, #booking-form select { width: 100%; padding: 10px; border-radius: 8px; border: none; background-color: transparent; color: #eee; font-size: 16px; box-shadow: inset 0 0 0 1px #555; box-sizing: border-box; }
#booking-form input:focus, #booking-form select:focus { outline: none; box-shadow: inset 0 0 0 2px #28a745; }
#booking-form button { margin-top: 20px; padding: 14px; background: #28a745; color: white; font-weight: bold; border: none; border-radius: 12px; cursor: pointer; font-size: 16px; width: 100%; transition: background 0.3s ease; }
#booking-form button:hover:not(:disabled) { background: #1e7e34; }
#booking-form button:disabled { background: #155d27; cursor: not-allowed; }
#message { margin-top: 15px; font-size: 1.1em; color: #aaffff; text-align: center; }
#closeBookingForm { position: absolute; top: 12px; right: 16px; font-size: 24px; color: #28a745; cursor: pointer; user-select: none; }
</style>
</head>
<body>
<h1>ğŸ½ï¸ Ğ¡Ñ‚Ğ¾Ğ»Ğ¸ĞºĞ¸</h1>
<div class="grid">
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 1" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 1</h2><p>Ğ¡Ñ‚Ğ¾Ğ»Ğ¸Ğº Ñ Ğ´Ğ¸Ğ²Ğ°Ğ½Ğ¾Ğ¼ Ñƒ Ğ¾ĞºĞ½Ğ°</p></div><button data-table="1">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 2" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 2</h2><p>Ğ£ÑÑ‚Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ¾Ğ»Ğ¸Ğº Ğ½Ğ° Ğ´Ğ²Ğ¾Ğ¸Ñ…</p></div><button data-table="2">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 3" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 3</h2><p>Ğ£ Ğ¾ĞºĞ½Ğ°, Ğ½Ğ° 4 Ğ¿ĞµÑ€ÑĞ¾Ğ½Ñ‹</p></div><button data-table="3">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 4" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 4</h2><p>Ğ ÑĞ´Ğ¾Ğ¼ Ñ Ğ±Ğ°Ñ€Ğ½Ğ¾Ğ¹ ÑÑ‚Ğ¾Ğ¹ĞºĞ¾Ğ¹</p></div><button data-table="4">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 5" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 5</h2><p>Ğ¡Ñ‚Ğ¾Ğ»Ğ¸Ğº Ñ Ğ´Ğ¸Ğ²Ğ°Ğ½Ğ¾Ğ¼</p></div><button data-table="5">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 6" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 6</h2><p>Ğ”Ğ»Ñ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¸Ğ· 6 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº</p></div><button data-table="6">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 7" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 7</h2><p>Ğ£ Ğ¾ĞºĞ½Ğ°, Ñ€ÑĞ´Ğ¾Ğ¼ Ñ Ñ€Ğ°ÑÑ‚ĞµĞ½Ğ¸ÑĞ¼Ğ¸</p></div><button data-table="7">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 8" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 8</h2><p>Ğ’ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ğµ Ğ·Ğ°Ğ»Ğ°</p></div><button data-table="8">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
Â  <div class="card"><img src="/images/tabel1.jpg" alt="Ğ¡Ñ‚Ğ¾Ğ» 9" /><div class="card-content"><h2>Ğ¡Ñ‚Ğ¾Ğ» 9</h2><p>ĞĞºÑ€ÑƒĞ¶Ñ‘Ğ½ Ğ¼ÑĞ³ĞºĞ¸Ğ¼Ğ¸ ĞºÑ€ĞµÑĞ»Ğ°Ğ¼Ğ¸</p></div><button data-table="9">Ğ—Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button></div>
</div>

<div id="booking-form-container">
Â  <form id="booking-form">
Â  Â  <div id="closeBookingForm">&times;</div>
Â  Â  <h2>Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ğ¾Ğ»Ğ¸ĞºĞ° <span id="selected-table"></span></h2>
Â  Â  <label for="date">Ğ”Ğ°Ñ‚Ğ°</label>
Â  Â  <input type="date" id="date" required />
Â  Â  <label for="time">Ğ’Ñ€ĞµĞ¼Ñ</label>
Â  Â  <select id="time" required></select>
Â  Â  <label for="guests">ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³Ğ¾ÑÑ‚ĞµĞ¹</label>
Â  Â  <input type="number" id="guests" min="1" max="20" value="1" required />
Â  Â  <label for="phone">Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½</label>
Â  Â  <input type="tel" id="phone" placeholder="+7 (999) 123-45-67" required />
Â  Â  <button type="submit">ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ±Ñ€Ğ¾Ğ½ÑŒ</button>
Â  Â  <div id="message"></div>
Â  </form>
</div>

<script src="https://telegram.org/js/telegram-web-app.js?59"></script>
<script>
function generateTimeSlots() {
Â  Â  const slots = [];
Â  Â  let start = new Date(); start.setHours(12,0,0,0);
Â  Â  const end = new Date(); end.setHours(23,0,0,0);
Â  Â  while(start <= end){
Â  Â  Â  Â  slots.push(start.toTimeString().slice(0,5));
Â  Â  Â  Â  start = new Date(start.getTime()+30*60000);
Â  Â  }
Â  Â  return slots;
}
function fillTimeSelect() {
Â  Â  const select = document.getElementById("time");
Â  Â  generateTimeSlots().forEach(slot => {
Â  Â  Â  Â  const option = document.createElement("option");
Â  Â  Â  Â  option.value = slot;
Â  Â  Â  Â  option.textContent = slot;
Â  Â  Â  Â  select.appendChild(option);
Â  Â  });
}
fillTimeSelect();

const bookingContainer = document.getElementById("booking-form-container");
const bookingForm = document.getElementById("booking-form");
const selectedTableSpan = document.getElementById("selected-table");
let selectedTable = null;

document.querySelectorAll('.card button').forEach(btn => {
Â  Â  btn.addEventListener('click', () => {
Â  Â  Â  Â  selectedTable = btn.dataset.table;
Â  Â  Â  Â  selectedTableSpan.textContent = selectedTable;
Â  Â  Â  Â  bookingContainer.style.display = "flex";
Â  Â  Â  Â  document.getElementById("date").valueAsDate = new Date();
Â  Â  Â  Â  document.getElementById("message").textContent = "";
Â  Â  });
});

document.getElementById("closeBookingForm").addEventListener('click', () => {
Â  Â  bookingContainer.style.display = "none";
});

// ĞĞ‘ĞĞĞ’Ğ›ĞĞĞĞ«Ğ™ Ğ‘Ğ›ĞĞš:
bookingForm.addEventListener('submit', async (e) => {
Â  Â  e.preventDefault();
Â  Â  const dateInput = document.getElementById("date");
Â  Â  const timeInput = document.getElementById("time");
Â  Â  const guestsInput = document.getElementById("guests");
Â  Â  const phoneInput = document.getElementById("phone");
Â  Â  const messageDiv = document.getElementById("message");

Â  Â  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ°Ñ‚Ñ‹
Â  Â  const today = new Date();
Â  Â  const selectedDate = new Date(dateInput.value);
Â  Â  selectedDate.setHours(0,0,0,0);
Â  Â  today.setHours(0,0,0,0);
Â  Â  if(selectedDate < today){
Â  Â  Â  Â  messageDiv.textContent = "âŒ ĞĞµĞ»ÑŒĞ·Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ÑˆĞ»ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ";
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  // ğŸ†• ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ Ğ¸Ğ· Telegram WebApp
Â  Â  let userId = null;
Â  Â  let userName = "ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğ¹";
Â  Â  if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe) {
Â  Â  Â  Â  const user = window.Telegram.WebApp.initDataUnsafe.user;
Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  userId = user.id;
Â  Â  Â  Â  Â  Â  userName = `${user.first_name || ''} ${user.last_name || ''}`.trim();
Â  Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  // ğŸ†• ĞĞ±ÑŠĞµĞºÑ‚ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸, Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ
Â  Â  const data = {
Â  Â  Â  Â  user_id: userId,
Â  Â  Â  Â  user_name: userName,
Â  Â  Â  Â  table: selectedTable,
Â  Â  Â  Â  date: dateInput.value,
Â  Â  Â  Â  time: timeInput.value,
Â  Â  Â  Â  guests: guestsInput.value,
Â  Â  Â  Â  phone: phoneInput.value
Â  Â  };
Â  Â  
Â  Â  console.log(data);
Â  Â  try{
Â  Â  Â  Â  const res = await fetch("https://readytoearn-4.onrender.com/book", {
Â  Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  Â  body: JSON.stringify(data)
Â  Â  Â  Â  });
Â  Â  Â  Â  const result = await res.json();
Â  Â  Â  Â  if(res.ok){
Â  Â  Â  Â  Â  Â  messageDiv.textContent = "âœ… Ğ¡Ñ‚Ğ¾Ğ»Ğ¸Ğº Ğ·Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½";
Â  Â  Â  Â  Â  Â  bookingForm.reset();
Â  Â  Â  Â  Â  Â  // Ğ—Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ñ‡ĞµÑ€ĞµĞ· 2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
Â  Â  Â  Â  Â  Â  setTimeout(()=>{bookingContainer.style.display="none";},2000);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ°
Â  Â  Â  Â  Â  Â  messageDiv.textContent = `âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: ${result.message || 'ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ·Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ'}`;
Â  Â  Â  Â  }
Â  Â  } catch(err){
Â  Â  Â  Â  console.error('Fetch error:', err);
Â  Â  Â  Â  messageDiv.textContent = "âŒ ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞµÑ‚Ğ¸. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ.";
Â  Â  }
});
</script>
</body>
</html>