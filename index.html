<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Бронирование столика</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        :root{
            --primary-color: #8C7851;
            --secondary-color: #E2D2B0;
            --bg-dark: #2A3131;
            --bg-medium: #3E4646;
            --text-main: #FFFFFF;
            --table-free: #5D6D7E;
            --table-selected: #8C7851;
            --table-booked: #B54646;
            color-scheme: dark;
        }
        *{box-sizing: border-box}
        body{
            margin:0; padding:0;
            font-family: 'Times New Roman', serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            display:flex; flex-direction:column; min-height:100vh;
        }
        .header-section{ text-align:center; padding:20px 0 15px; color:var(--secondary-color) }
        .header-title{ font-size:28px; margin:0; font-weight:bold }
        .header-subtitle{ font-size:14px; margin-top:5px; color:var(--secondary-color) }

        .selection-panel{
            display:flex; justify-content:space-around; align-items:flex-start;
            padding:15px 10px; border-bottom:1px solid var(--bg-medium);
        }
        .selection-item{ display:flex; flex-direction:column; align-items:center; width:30%; text-align:center }
        .selection-icon{ font-size:20px; color:var(--secondary-color); margin-bottom:5px }
        .selection-label{ font-size:11px; color:var(--secondary-color); text-transform:uppercase }
        .selection-value{ font-size:14px; font-weight:bold; color:var(--text-main) }

        #booking-overlay{
            position:fixed; top:0; left:0; width:100vw; height:100vh;
            background:rgba(0,0,0,0.75); z-index:999; display:none; justify-content:center; align-items:center;
        }
        #booking-form{
            background:var(--bg-medium); border-radius:12px; padding:20px; max-width:350px; width:90%;
            box-shadow:0 0 20px rgba(0,0,0,0.7); color:var(--text-main); position:relative;
        }
        #closeBookingForm{ position:absolute; top:10px; right:15px; font-size:24px; color:var(--secondary-color); cursor:pointer }
        #booking-form label{ display:block; margin:8px 0 4px; color:var(--secondary-color); font-size:12px }
        #booking-form input, #booking-form select{
            width:100%; padding:8px; border-radius:8px; border:1px solid #444; background:#333; color:var(--text-main);
        }
        #booking-form button[type="submit"]{
            margin-top:20px; padding:12px; background:var(--primary-color); color:var(--text-main); font-weight:bold;
            border:none; border-radius:8px; cursor:pointer; font-size:14px; width:100%; text-transform:uppercase;
        }

        .table-map-container{ flex-grow:1; display:flex; flex-direction:column; align-items:center; padding:20px 10px 40px }
        .map-wrapper{ width:100%; max-width:750px; display:flex; gap:20px; justify-content:center; align-items:flex-start }
        .table-map{
            width:100%; max-width:350px; height:400px; background:var(--bg-medium); border-radius:12px; position:relative;
            border:2px solid #555; box-shadow:0 0 15px rgba(0,0,0,0.5); flex-shrink:0;
            background-image: linear-gradient(135deg, #444c4c 25%, transparent 25%),
                              linear-gradient(225deg, #444c4c 25%, transparent 25%),
                              linear-gradient(45deg, #444c4c 25%, #3E4646 25%),
                              linear-gradient(315deg, #444c4c 25%, #3E4646 25%);
            background-size: 20px 20px; background-position: 0 0, 10px 0, 10px -10px, 0px 10px;
        }

        #table-details-card{
            display:none; width:100%; max-width:350px; background:var(--bg-medium); border-radius:12px; padding:15px;
            box-shadow:0 0 15px rgba(0,0,0,0.5); border:2px solid var(--secondary-color); transition:all .25s;
        }
        #table-details-card img{ width:100%; height:auto; border-radius:8px; margin-bottom:10px; object-fit:cover; max-height:200px }
        #table-details-card h3{ color:var(--secondary-color); margin:0 0 5px 0; font-size:18px }
        #table-details-card p{ color:var(--text-main); margin:0; font-size:14px }

        .map-feature{ position:absolute; text-align:center; font-size:10px; color:var(--secondary-color); padding:5px; opacity:0.8; border-radius:4px }
        #bar-counter{ top:0; left:0; width:100%; height:40px; background:#4B4F52; border-bottom:3px solid var(--secondary-color); line-height:30px; font-size:12px }
        #entrance{ bottom:0; left:50%; transform:translateX(-50%); width:80px; height:30px; background:#555; line-height:20px; border-top:2px solid var(--secondary-color); color:var(--text-main); font-weight:bold }

        .table-element{ position:absolute; display:flex; justify-content:center; align-items:center; cursor:pointer; transition: background-color .25s, border-color .25s, transform .12s; font-weight:bold; color:var(--text-main); box-sizing:border-box; font-size:12px }
        .table-round{ border-radius:50% }
        .table-rect{ border-radius:4px }
        .table-element{ background:var(--table-free); border:2px solid var(--secondary-color) }
        .table-selected{ background:var(--table-selected) !important; border-color:var(--secondary-color) !important; box-shadow:0 0 10px var(--secondary-color); transform:translateY(-3px) }
        .table-booked{ background:var(--table-booked) !important; border-color:var(--table-booked) !important; cursor:not-allowed; opacity:0.85; transform:none }

        #table-1 { top:55px; left:50px; width:45px; height:45px }
        #table-2 { top:55px; left:255px; width:45px; height:45px }
        #table-3 { top:120px; left:10px; width:80px; height:50px }
        #table-4 { top:200px; left:10px; width:80px; height:50px }
        #table-5 { top:160px; left:135px; width:70px; height:70px }
        #table-6 { top:160px; right:10px; width:80px; height:80px; border-radius:6px }
        #table-7 { top:300px; left:50px; width:80px; height:50px }
        #table-8 { top:300px; left:220px; width:80px; height:50px }

        #confirm-btn{
            width:80%; margin:20px auto 10px; padding:18px; background:var(--primary-color); color:var(--text-main); font-size:18px; font-weight:bold; border:none; border-radius:10px; cursor:pointer; text-transform:uppercase; box-shadow:0 6px 15px rgba(140,120,81,0.5);
        }
        #confirm-btn:hover:not(:disabled){ background:#A39169; box-shadow:0 8px 20px rgba(140,120,81,0.7) }
        #confirm-btn:disabled{ background:#666; cursor:not-allowed; box-shadow:none }
        .confirmation-text{ text-align:center; font-size:12px; color:var(--secondary-color) }

        #message{ margin-top:10px; color:var(--text-main); font-size:14px; min-height:1.2em }
        @media (max-width:768px){ .map-wrapper{ flex-direction:column; align-items:center } #table-details-card{ margin-top:20px } }
    </style>
</head>
<body>

<div class="header-section">
    <div class="header-title">Забронировать Столик</div>
    <div class="header-subtitle">Ресторан "Золотая Ложка"</div>
</div>

<div class="selection-panel">
    <div class="selection-item" id="date-select-trigger">
        <span class="selection-icon"><i class="fa fa-calendar"></i></span>
        <span class="selection-label">Дата</span>
        <span class="selection-value" id="current-date-value">Сегодня, 4 окт 2025</span>
    </div>
    <div class="selection-item" id="time-select-trigger">
        <span class="selection-icon"><i class="fa fa-clock-o"></i></span>
        <span class="selection-label">Время</span>
        <span class="selection-value" id="current-time-value">12:30</span>
    </div>
    <div class="selection-item" id="guests-select-trigger">
        <span class="selection-icon"><i class="fa fa-users"></i></span>
        <span class="selection-label">Гости</span>
        <span class="selection-value" id="current-guests-value">2</span>
    </div>
</div>

<div class="table-map-container">
    <div class="map-wrapper">
        <div class="table-map" id="table-map">
            <div id="bar-counter" class="map-feature">Барная Стойка</div>
            <div id="entrance" class="map-feature">Вход</div>

            <div class="table-element table-round" id="table-1" data-table="1">1</div>
            <div class="table-element table-round" id="table-2" data-table="2">2</div>
            <div class="table-element table-rect" id="table-3" data-table="3">3</div>
            <div class="table-element table-rect" id="table-4" data-table="4">4</div>
            <div class="table-element table-round" id="table-5" data-table="5">5</div>
            <div class="table-element table-rect" id="table-6" data-table="6">6</div>
            <div class="table-element table-rect" id="table-7" data-table="7">7</div>
            <div class="table-element table-rect" id="table-8" data-table="8">8</div>
        </div>

        <div id="table-details-card">
            <img id="table-photo" src="" alt="Фото столика" />
            <h3 id="table-title"></h3>
            <p id="table-description"></p>
        </div>
    </div>

    <button id="confirm-btn" disabled>Подтвердить бронь</button>
    <div class="confirmation-text">Вы получите подтверждение через Telegram</div>
</div>

<div id="booking-overlay">
    <form id="booking-form">
        <div id="closeBookingForm">&times;</div>
        <h2>Детали бронирования</h2>

        <label for="date-modal">Выберите дату</label>
        <input type="date" id="date-modal" required />

        <label for="time-modal">Выберите время</label>
        <select id="time-modal" required></select>

        <label for="guests-modal">Количество гостей</label>
        <input type="number" id="guests-modal" min="1" max="20" value="2" required />

        <label for="phone-modal">Телефон</label>
        <input type="tel" id="phone-modal" placeholder="+7 (XXX) XXX-XX-XX" required />

        <button type="submit">Забронировать столик <span id="selected-table-modal"></span></button>
        <div id="message"></div>
    </form>
</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
/* ===========================
   ДАННЫЕ О СТОЛАХ
   =========================== */
const tableData = {
    '1': { name: 'Столик №1 (У Бара)', seats:2, desc:'Уютный столик для двоих с видом на бар.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' },
    '2': { name: 'Столик №2 (У Бара)', seats:2, desc:'Небольшой круглый стол. Идеально для свиданий.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' },
    '3': { name: 'Банкетка №3 (У Стены)', seats:4, desc:'Комфортный диван на четырех человек.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' },
    '4': { name: 'Банкетка №4 (У Стены)', seats:4, desc:'Удобная банкетка для семейного ужина.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' },
    '5': { name: 'Центральный Стол №5', seats:6, desc:'Большой круглый стол в центре зала.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' },
    '6': { name: 'Стол №6 (Квадратный)', seats:8, desc:'Самый большой стол в ресторане.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' },
    '7': { name: 'Стол №7 (У Входа)', seats:4, desc:'Прямоугольный столик, близко к входу.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' },
    '8': { name: 'Стол №8 (У Входа)', seats:4, desc:'Прямоугольный стол с обзором на вход.', photo_url: 'https://media.istockphoto.com/id/649672132/ru/%D1%84%D0%BE%D1%82%D0%BE/...' }
};

/* ===========================
   Глобальные переменные и DOM
   =========================== */
let user_id = null;
let user_name = null;
const botApiUrl = new URLSearchParams(window.location.search).get('bot_url') || "https://readytoearn-4.onrender.com";
let selectedTable = null;

const dateInputModal = document.getElementById("date-modal");
const timeSelectModal = document.getElementById("time-modal");
const guestsInputModal = document.getElementById("guests-modal");
const phoneInputModal = document.getElementById("phone-modal");
const confirmBtn = document.getElementById("confirm-btn");
const bookingOverlay = document.getElementById("booking-overlay");
const bookingForm = document.getElementById("booking-form");
const messageDiv = document.getElementById("message");

const dateValueDisplay = document.getElementById("current-date-value");
const timeValueDisplay = document.getElementById("current-time-value");
const guestsValueDisplay = document.getElementById("current-guests-value");

const tableDetailsCard = document.getElementById("table-details-card");
const tablePhoto = document.getElementById("table-photo");
const tableTitle = document.getElementById("table-title");
const tableDescription = document.getElementById("table-description");

/* ===========================
   Утилиты
   =========================== */
function getQueryParams() {
    const params = {};
    new URLSearchParams(window.location.search).forEach((v,k)=> params[k]=v);
    return params;
}
function adaptToTheme() { document.documentElement.style.setProperty('color-scheme','dark'); }

function formatDateForDisplay(date) {
    const today = new Date(); const tomorrow = new Date(today); tomorrow.setDate(today.getDate()+1);
    if (date.toDateString() === today.toDateString()) return "Сегодня, " + date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' });
    if (date.toDateString() === tomorrow.toDateString()) return "Завтра, " + date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' });
    return date.toLocaleDateString('ru-RU', { weekday: 'short', day: 'numeric', month: 'short' });
}

function generateAllTimeSlots() {
    const slots = [];
    let start = new Date(); start.setHours(12,0,0,0);
    const end = new Date(); end.setHours(23,0,0,0);
    while (start <= end) { slots.push(start.toTimeString().slice(0,5)); start = new Date(start.getTime() + 30*60000); }
    return slots;
}

/* ===========================
   Загрузка и обработка страницы
   =========================== */
window.onload = async function(){
    const params = getQueryParams();
    user_id = params.user_id;
    user_name = params.user_name;
    if (window.Telegram && window.Telegram.WebApp) { adaptToTheme(); window.Telegram.WebApp.ready(); }

    const now = new Date();
    const todayStr = now.toISOString().slice(0,10);
    dateInputModal.value = todayStr;
    dateValueDisplay.textContent = formatDateForDisplay(now);
    guestsValueDisplay.textContent = guestsInputModal.value;

    // В начале пометим уже занятые столы (для текущего времени, если есть) и заполним слоты без выбранного стола
    await updateTableAvailability(dateInputModal.value, timeSelectModal.value || null);
    await fillTimeSelect(null, todayStr);
};

/* ===========================
   Работа с доступностью: BOOKED TABLES + TIMES
   - Backend endpoints used:
   * GET /get_booked_times?table={id}&date={YYYY-MM-DD} -> {status:'ok', booked_times: ['12:00', ...]}
   * GET /get_booked_tables?date={YYYY-MM-DD}&time={HH:MM} -> {status:'ok', booked_tables: [1,2,...]}
   =========================== */

/**
 * Обновляет визуальную доступность столов (помечает занятые)
 * - Не удаляем класс table-booked здесь, только обновляем на основе ответа сервера.
 */
async function updateTableAvailability(date, time) {
    // Сбрасываем только выделение (selected), но не помеченные занятыми столы
    document.querySelectorAll('.table-element').forEach(t => t.classList.remove('table-selected'));

    // Если передана дата+время — получаем список занятых столов и помечаем их
    if (date && time) {
        try {
            const resp = await fetch(`${botApiUrl}/get_booked_tables?date=${encodeURIComponent(date)}&time=${encodeURIComponent(time)}`);
            const json = await resp.json();
            if (json && json.status === 'ok' && Array.isArray(json.booked_tables)) {
                // Сначала снимем класс table-booked со всех, потом добавим для занятых
                document.querySelectorAll('.table-element').forEach(t => t.classList.remove('table-booked'));
                json.booked_tables.forEach(id => {
                    const el = document.getElementById(`table-${id}`);
                    if (el) el.classList.add('table-booked');
                });
            } else {
                // если неожиданный ответ — не ломаем UX, просто снимаем пометки
                document.querySelectorAll('.table-element').forEach(t => t.classList.remove('table-booked'));
            }
        } catch (err) {
            console.error('Ошибка при получении занятых столов:', err);
            // В случае ошибки не трогаем текущие пометки (чтобы не внезапно сделать всё свободным)
        }
    } else {
        // Без времени — не можем корректно узнать занятость; снимаем только выделения, оставляя пометки
    }

    // Если выбран стол — проверяем, не стал ли он занятым
    if (selectedTable) {
        const tableElement = document.getElementById(`table-${selectedTable}`);
        if (tableElement && tableElement.classList.contains('table-booked')) {
            // выбранный стол оказался занятым — снимаем выбор
            selectedTable = null;
            confirmBtn.disabled = true;
            confirmBtn.textContent = 'Выберите другой стол';
            tableDetailsCard.style.display = 'none';
        } else if (tableElement) {
            tableElement.classList.add('table-selected');
            confirmBtn.disabled = false;
            confirmBtn.textContent = `Забронировать стол ${selectedTable}`;
            showTableDetails(selectedTable);
        } else {
            confirmBtn.disabled = true;
            confirmBtn.textContent = 'Подтвердить бронь';
        }
    } else {
        confirmBtn.disabled = true;
        confirmBtn.textContent = 'Подтвердить бронь';
    }
}

/**
 * Заполняет селект таймслотов.
 * если tableId передан — исключаем забронированные слоты для этого стола.
 * если tableId == null — показываем слоты (без учёта конкретного стола).
 */
async function fillTimeSelect(tableId, selectedDate) {
    const select = timeSelectModal;
    select.innerHTML = '';
    select.disabled = true;

    const allSlots = generateAllTimeSlots();
    let bookedTimes = [];

    if (tableId) {
        try {
            const url = `${botApiUrl}/get_booked_times?table=${encodeURIComponent(tableId)}&date=${encodeURIComponent(selectedDate)}`;
            const res = await fetch(url);
            const data = await res.json();
            if (data && data.status === 'ok' && Array.isArray(data.booked_times)) {
                bookedTimes = data.booked_times;
            }
        } catch (err) {
            console.error('Ошибка при получении занятых времен:', err);
        }
    }

    const now = new Date();
    const todayDateStr = now.toISOString().slice(0,10);
    let firstAvailableSlot = null;

    allSlots.forEach(slot => {
        // если слот забронирован для выбранного стола — пропускаем
        if (bookedTimes.includes(slot)) return;

        // если выбранная дата — сегодня, не показываем прошедшие слоты
        let isPast = false;
        if (selectedDate === todayDateStr) {
            const slotTime = new Date(`${selectedDate}T${slot}:00`);
            if (slotTime < now) isPast = true;
        }
        if (isPast) return;

        const option = document.createElement('option');
        option.value = slot;
        option.textContent = slot;
        select.appendChild(option);
        if (!firstAvailableSlot) firstAvailableSlot = slot;
    });

    select.disabled = false;
    if (select.options.length > 0) {
        select.value = firstAvailableSlot;
        timeValueDisplay.textContent = firstAvailableSlot;
    } else {
        timeValueDisplay.textContent = "Нет мест";
    }

    // Обновляем пометки столов по выбранной дате/времени
    await updateTableAvailability(selectedDate, select.value || null);
}

/* ===========================
   UI: детали стола и обработчики
   =========================== */
function showTableDetails(tableId) {
    const data = tableData[tableId];
    if (!data) return;
    tablePhoto.src = data.photo_url;
    tableTitle.textContent = data.name;
    tableDescription.innerHTML = `<strong>Мест:</strong> ${data.seats}<br>${data.desc}`;
    tableDetailsCard.style.display = 'block';
}

// клик по столу
document.querySelectorAll('.table-element').forEach(table => {
    table.addEventListener('click', async (e) => {
        const clickedTable = e.currentTarget.dataset.table;
        // если стол помечен как занятый — показать сообщение и выйти
        if (e.currentTarget.classList.contains('table-booked')) {
            messageDiv.textContent = '❌ Столик занят. Выберите другой.';
            messageDiv.style.display = 'block';
            return;
        }
        // снимем предыдущий выбор
        if (selectedTable) {
            const prev = document.getElementById(`table-${selectedTable}`);
            if (prev) prev.classList.remove('table-selected');
        }
        selectedTable = clickedTable;
        e.currentTarget.classList.add('table-selected');
        confirmBtn.disabled = false;
        confirmBtn.textContent = `Забронировать стол ${selectedTable}`;
        messageDiv.style.display = 'none';

        // Обновим таймслоты для выбранного стола и текущей даты
        await fillTimeSelect(selectedTable, dateInputModal.value);
        showTableDetails(selectedTable);
    });
});

confirmBtn.addEventListener('click', () => {
    if (!selectedTable) return;
    document.getElementById('selected-table-modal').textContent = selectedTable;
    phoneInputModal.value = '';
    bookingOverlay.style.display = 'flex';
});
document.getElementById("closeBookingForm").addEventListener('click', () => { bookingOverlay.style.display = 'none'; });

dateInputModal.addEventListener('change', async (e) => {
    const newDate = new Date(e.target.value);
    dateValueDisplay.textContent = formatDateForDisplay(newDate);
    // При смене даты обновляем таймслоты (для выбранного стола, если есть)
    await fillTimeSelect(selectedTable, e.target.value);
});

timeSelectModal.addEventListener('change', async (e) => {
    timeValueDisplay.textContent = e.target.value;
    // при смене времени обновляем статус столов (кто занялся на эту дату/время)
    await updateTableAvailability(dateInputModal.value, e.target.value);
});

guestsInputModal.addEventListener('change', (e) => {
    guestsValueDisplay.textContent = e.target.value;
});

/* ===========================
   Отправка брони (submit)
   =========================== */
bookingForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    messageDiv.textContent = ""; messageDiv.style.display = "none";

    if (!selectedTable) {
        messageDiv.textContent = "❌ Выберите стол перед подтверждением";
        messageDiv.style.display = "block";
        return;
    }

    const selectedDateTime = new Date(`${dateInputModal.value}T${timeSelectModal.value}:00`);
    const now = new Date();
    if (selectedDateTime < now) {
        messageDiv.textContent = "❌ Нельзя забронировать на прошедшее время";
        messageDiv.style.display = "block";
        return;
    }

    const payload = {
        user_id: user_id,
        user_name: user_name,
        table: selectedTable,
        date: dateInputModal.value,
        time: timeSelectModal.value,
        guests: guestsInputModal.value,
        phone: phoneInputModal.value
    };

    try {
        const res = await fetch(`${botApiUrl}/book`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
        });
        const result = await res.json();

        if (res.ok && result && result.status === 'ok') {
            // Успешно: показать сообщение, пометить стол как занятый, обновить таймслоты и отправить данные в TG
            messageDiv.textContent = "✅ Столик забронирован! Ищем подтверждение в Telegram.";
            messageDiv.style.display = "block";

            // помечаем таблицу как занято
            const bookedEl = document.getElementById(`table-${selectedTable}`);
            if (bookedEl) {
                bookedEl.classList.remove('table-selected');
                bookedEl.classList.add('table-booked');
            }

            // обновляем селект таймслотов для текущей даты (чтобы слот пропал)
            await fillTimeSelect(selectedTable, dateInputModal.value);

            // отправляем данные в Telegram WebApp (если доступно)
            if (window.Telegram && window.Telegram.WebApp) {
                try { window.Telegram.WebApp.sendData(JSON.stringify(payload)); } catch (err) { console.warn('Telegram sendData error', err); }
            }

            // скрываем оверлей и сбрасываем выбор через небольшую паузу
            setTimeout(async () => {
                bookingOverlay.style.display = "none";
                selectedTable = null;
                confirmBtn.disabled = true;
                confirmBtn.textContent = 'Подтвердить бронь';
                tableDetailsCard.style.display = 'none';

                // Обновим пометки столов для выбранной даты/времени (в т.ч. если backend зарегистрировал бронь)
                await updateTableAvailability(dateInputModal.value, timeSelectModal.value);
            }, 900);
        } else {
            messageDiv.textContent = `❌ Ошибка: ${result && result.message ? result.message : 'Не удалось забронировать'}`;
            messageDiv.style.display = "block";
        }
    } catch (err) {
        console.error('Fetch error:', err);
        messageDiv.textContent = "❌ Ошибка сети. Проверьте подключение.";
        messageDiv.style.display = "block";
    }
});
</script>
</body>
</html>
